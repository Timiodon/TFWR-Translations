# 迷宮
藉由給植物[施肥](docs/unlocks/fertilizer.md)獲得的 `Items.Weird_Substance` 對灌木有奇特的效果。如果無人機位於灌木上並呼叫 `use_item(Items.Weird_Substance, amount)`，該灌木會長成樹籬迷宮。
迷宮的大小取決於使用的 `Items.Weird_Substance` 數量（即 `use_item()` 呼叫的第二個引數）。
在未升級迷宮的情況下，使用 `n` 份 `Items.Weird_Substance` 會生成一個 `n`x`n` 的迷宮。每次迷宮升級等級會使寶藏的黃金翻倍，但同時也會使所需的 `Items.Weird_Substance` 數量翻倍。
因此要生成整個區域的迷宮：

```
plant(Entities.Bush)
substance = get_world_size() * 2 ** (num_unlocked(Unlocks.Mazes) - 1)
use_item(Items.Weird_Substance, substance)
```

出於某些原因，無人機無法飛越樹籬，儘管看起來並不高。

樹籬中某處藏有一個寶藏。對寶藏使用 `harvest()` 可獲得等同於迷宮面積的黃金。（例如 5x5 的的迷宮會產出 25 黃金。）

如果在其他地方使用 `harvest()`，迷宮會直接消失。

如果無人機位於寶藏上，`get_entity_type()` 會等於 `Entities.Treasure`；迷宮其他位置則為 `Entities.Hedge`。

除非你重複使用迷宮（詳見下方「重複使用迷宮」說明），迷宮內不會包含任何迴路。因此在迷宮中無法在不回頭的情況下回到同一位置。

你可以透過嘗試穿過牆來檢查是否有牆。
`move()` 在成功時回傳 `True`，否則回傳 `False`。

`can_move()` 可以在不移動的情況下檢查是否有牆。

如果你不知道如何找到寶藏，請參考提示 1。它會告訴你如何解決這類問題。

在迷宮內任何位置使用 `measure()` 都會回傳寶藏的位置：

```
x, y = measure()
```

作為額外挑戰，你也可以透過在寶藏上再次使用相同數量的 `Items.Weird_Substance` 來重複使用迷宮。
這會收集該寶藏，在迷宮中的隨機位置生成一個新的寶藏。
只有大小為 8x8 或更大的迷宮才能重複使用。

每次寶藏被移動時，迷宮的某些牆可能會被隨機移除。因此重複使用的迷宮可能會包含迴路。

請注意，迷宮中的迴路會使情況更困難，因為你可以在不回頭的情況下到達相同位置。重複使用迷宮並不會比直接採收並生成新迷宮獲得更多黃金。
這完全是個額外挑戰，可以跳過。
只有當額外資訊和捷徑能幫助你更快解出迷宮時，才值得這麼做。

寶藏最多可被重新定位 300 次。超過這個次數後，對寶藏使用奇異物質將不再增加其內含的黃金，也不會再移動。

<spoiler=顯示提示 1>這是一個解題的一般方法：

建立一個迷宮，並想像你就是無人機。

思考如果你身處迷宮中，會如何嘗試找到寶藏。

將你的策略逐步寫下，使其他人能在不思考的情況下照著執行。

然後嘗試將這些步驟翻譯成程式碼。
</spoiler>
<spoiler=顯示提示 2>只要沒有迴路，所有牆實際上是連成一個大型連通牆。如果沿著牆行進，牆會帶你走遍整個迷宮。
這個方法需要很少的程式碼，而且不需要記錄已走過的位置。大約 10 行程式碼就足夠。</spoiler>
<spoiler=顯示提示 3>與其用向東或向西這種絕對方向移動無人機，改用像「右轉」或「左轉」的相對方向通常更有用。為此你需要記錄無人機目前的移動方向。無人機實際上不會旋轉，但你可以在程式中維持一個「虛擬」旋轉方向。
以下索引技巧很有幫助：

```
directions = [North, East, South, West]
index = 0
```

使用 `% 4` 讓無人機在「圓環」中旋轉，於 `West` 之後會繞回到 `North`。
```
# 右轉
index = (index + 1) % 4

# 左轉
index = (index - 1) % 4

move(directions[index])
```
</spoiler>
<spoiler=顯示提示 4>如果你無法解出，可以選擇效率較低但較容易的方法。解一個 `1`x`1` 的迷宮總是輕而易舉。</spoiler>